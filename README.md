# Harmony ONE Telegram Bot (Test-ready)

این پروژه یک نمونهٔ **تست‌پذیر** از ربات تلگرام است که:
- برای هر کاربر یک آدرس HD-derived ایجاد می‌کند.
- واریزها به آن آدرس‌ها بررسی و به والت هات (hot wallet) sweep می‌شوند.
- موجودی داخل ربات به‌صورت internal ذخیره شده و کاربران می‌توانند داخلی انتقال دهند یا برداشت کنند.
- دیتابیس MySQL خارجی استفاده می‌شود؛ اسکریپت ساخت جداول در `sql/schema.sql` قرار دارد.
- پروژه داکرایز شده برای راه‌اندازی سریع.

**هشدار امنیتی:** این یک نمونهٔ آموزشی و تستی است. هرگز از mnemonic یا private key اصلی در این نمونه استفاده نکنید. برای production از KMS، بررسی امنیتی و قوانین مالی استفاده کنید.

## راه‌اندازی سریع برای تست
1. MySQL را آماده کن و `sql/schema.sql` را اجرا کن.
2. `.env` را بساز و مقداردهی کن (از `.env.example` کپی کن).
3. اجرا محلی:
   - `npm ci`
   - `node src/index.js`
4. یا با داکر:
   - `docker build -t harmony-bot .`
   - `docker run --env-file .env -v $(pwd):/app -p 3000:3000 harmony-bot`

فرمان‌ها:
- `/start` — ثبت‌نام و ایجاد آدرس اختصاصی.
- `/balance` — نمایش موجودی داخلی.
- `/pay <username> <amount>` — انتقال داخلی به کاربر دیگر (username بدون @).
- `/withdraw <amount> <toAddress>` — برداشت به آدرس هارمونی دلخواه.

برای توسعه: لاگ‌ها را بازتر کن، ارسال تراکنش‌ها را با صف‌بندی امن‌تر کن و parsing دقیق تراکنش‌های ورودی را اضافه کن.
